"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/habits";
exports.ids = ["pages/api/habits"];
exports.modules = {

/***/ "dotenv":
/*!*************************!*\
  !*** external "dotenv" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("dotenv");

/***/ }),

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("mongoose");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fhabits&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fhabits.ts&middlewareConfigBase64=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fhabits&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fhabits.ts&middlewareConfigBase64=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _src_pages_api_habits_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/pages/api/habits.ts */ \"(api)/./src/pages/api/habits.ts\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_habits_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_habits_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/habits\",\n        pathname: \"/api/habits\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _src_pages_api_habits_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmhhYml0cyZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnNyYyUyRnBhZ2VzJTJGYXBpJTJGaGFiaXRzLnRzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNMO0FBQzFEO0FBQ3NEO0FBQ3REO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyxxREFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMscURBQVE7QUFDcEM7QUFDTyx3QkFBd0IsZ0hBQW1CO0FBQ2xEO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdml0ZS1wcm9qZWN0Lz9iNzJkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9zcmMvcGFnZXMvYXBpL2hhYml0cy50c1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCBcImRlZmF1bHRcIik7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCBcImNvbmZpZ1wiKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2hhYml0c1wiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2hhYml0c1wiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fhabits&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fhabits.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./src/db/mongoClient.ts":
/*!*******************************!*\
  !*** ./src/db/mongoClient.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HabitModel: () => (/* binding */ HabitModel),\n/* harmony export */   checkConnection: () => (/* binding */ checkConnection),\n/* harmony export */   connectDB: () => (/* binding */ connectDB),\n/* harmony export */   initializeDefaultHabits: () => (/* binding */ initializeDefaultHabits)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var dotenv__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! dotenv */ \"dotenv\");\n/* harmony import */ var dotenv__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(dotenv__WEBPACK_IMPORTED_MODULE_1__);\n\n\ndotenv__WEBPACK_IMPORTED_MODULE_1___default().config();\nconst MONGODB_URI = process.env.MONGODB_URI || \"mongodb://localhost:27017/mit-tracker\";\nlet isConnected = false;\nconst habitSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n    name: {\n        type: String,\n        required: true\n    },\n    goal: {\n        type: String,\n        required: true\n    },\n    unit: {\n        type: String,\n        required: true\n    },\n    entries: {\n        type: Map,\n        of: String,\n        default: new Map()\n    },\n    streak: {\n        type: Number,\n        default: 0\n    },\n    chunks: {\n        type: Number,\n        required: false\n    }\n});\nconst HabitModel = (mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).Habit || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model(\"Habit\", habitSchema);\nconst connectDB = async ()=>{\n    console.log(\"Connecting to MongoDB...\");\n    if (isConnected) {\n        console.log(\"Using existing MongoDB connection\");\n        return;\n    }\n    try {\n        if (!MONGODB_URI) {\n            throw new Error(\"MONGODB_URI is not defined in environment variables\");\n        }\n        await mongoose__WEBPACK_IMPORTED_MODULE_0___default().connect(MONGODB_URI);\n        isConnected = true;\n        console.log(\"MongoDB connected successfully\");\n    } catch (error) {\n        isConnected = false;\n        console.error(\"MongoDB connection error:\", error);\n        throw error;\n    }\n};\nconst checkConnection = ()=>{\n    return {\n        isConnected,\n        readyState: (mongoose__WEBPACK_IMPORTED_MODULE_0___default().connection).readyState\n    };\n};\n// Add a new function to initialize the database with default habits if empty\nconst initializeDefaultHabits = async (defaultHabits)=>{\n    try {\n        const count = await HabitModel.countDocuments();\n        if (count === 0) {\n            await HabitModel.insertMany(defaultHabits.map((habit)=>({\n                    ...habit,\n                    entries: new Map(Object.entries(habit.entries))\n                })));\n            console.log(\"Default habits initialized\");\n        }\n    } catch (error) {\n        console.error(\"Error initializing default habits:\", error);\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvZGIvbW9uZ29DbGllbnQudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBNEM7QUFDaEI7QUFHNUJFLG9EQUFhO0FBRWIsTUFBTUUsY0FDSkMsUUFBUUMsR0FBRyxDQUFDRixXQUFXLElBQUk7QUFFN0IsSUFBSUcsY0FBYztBQUVsQixNQUFNQyxjQUFjLElBQUlQLDRDQUFNQSxDQUFRO0lBQ3BDUSxNQUFNO1FBQUVDLE1BQU1DO1FBQVFDLFVBQVU7SUFBSztJQUNyQ0MsTUFBTTtRQUFFSCxNQUFNQztRQUFRQyxVQUFVO0lBQUs7SUFDckNFLE1BQU07UUFBRUosTUFBTUM7UUFBUUMsVUFBVTtJQUFLO0lBQ3JDRyxTQUFTO1FBQUVMLE1BQU1NO1FBQUtDLElBQUlOO1FBQVFPLFNBQVMsSUFBSUY7SUFBTTtJQUNyREcsUUFBUTtRQUFFVCxNQUFNVTtRQUFRRixTQUFTO0lBQUU7SUFDbkNHLFFBQVE7UUFBRVgsTUFBTVU7UUFBUVIsVUFBVTtJQUFNO0FBQzFDO0FBRU8sTUFBTVUsYUFDWHRCLHdEQUFlLENBQUN3QixLQUFLLElBQUl4QixxREFBYyxDQUFRLFNBQVNRLGFBQWE7QUFFaEUsTUFBTWtCLFlBQVk7SUFDdkJDLFFBQVFDLEdBQUcsQ0FBQztJQUNaLElBQUlyQixhQUFhO1FBQ2ZvQixRQUFRQyxHQUFHLENBQUM7UUFDWjtJQUNGO0lBRUEsSUFBSTtRQUNGLElBQUksQ0FBQ3hCLGFBQWE7WUFDaEIsTUFBTSxJQUFJeUIsTUFBTTtRQUNsQjtRQUVBLE1BQU03Qix1REFBZ0IsQ0FBQ0k7UUFDdkJHLGNBQWM7UUFDZG9CLFFBQVFDLEdBQUcsQ0FBQztJQUNkLEVBQUUsT0FBT0csT0FBTztRQUNkeEIsY0FBYztRQUNkb0IsUUFBUUksS0FBSyxDQUFDLDZCQUE2QkE7UUFDM0MsTUFBTUE7SUFDUjtBQUNGLEVBQUU7QUFFSyxNQUFNQyxrQkFBa0I7SUFDN0IsT0FBTztRQUNMekI7UUFDQTBCLFlBQVlqQyw0REFBbUIsQ0FBQ2lDLFVBQVU7SUFFNUM7QUFDRixFQUFFO0FBRUYsNkVBQTZFO0FBQ3RFLE1BQU1FLDBCQUEwQixPQUFPQztJQUM1QyxJQUFJO1FBQ0YsTUFBTUMsUUFBUSxNQUFNZixXQUFXZ0IsY0FBYztRQUM3QyxJQUFJRCxVQUFVLEdBQUc7WUFDZixNQUFNZixXQUFXaUIsVUFBVSxDQUN6QkgsY0FBY0ksR0FBRyxDQUFDLENBQUNDLFFBQVc7b0JBQzVCLEdBQUdBLEtBQUs7b0JBQ1IxQixTQUFTLElBQUlDLElBQUkwQixPQUFPM0IsT0FBTyxDQUFDMEIsTUFBTTFCLE9BQU87Z0JBQy9DO1lBRUZZLFFBQVFDLEdBQUcsQ0FBQztRQUNkO0lBQ0YsRUFBRSxPQUFPRyxPQUFPO1FBQ2RKLFFBQVFJLEtBQUssQ0FBQyxzQ0FBc0NBO0lBQ3REO0FBQ0YsRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL3ZpdGUtcHJvamVjdC8uL3NyYy9kYi9tb25nb0NsaWVudC50cz85Y2I4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSwgeyBTY2hlbWEgfSBmcm9tIFwibW9uZ29vc2VcIjtcbmltcG9ydCBkb3RlbnYgZnJvbSBcImRvdGVudlwiO1xuaW1wb3J0IHsgSGFiaXQgfSBmcm9tIFwiLi4vdHlwZXNcIjtcblxuZG90ZW52LmNvbmZpZygpO1xuXG5jb25zdCBNT05HT0RCX1VSSSA9XG4gIHByb2Nlc3MuZW52Lk1PTkdPREJfVVJJIHx8IFwibW9uZ29kYjovL2xvY2FsaG9zdDoyNzAxNy9taXQtdHJhY2tlclwiO1xuXG5sZXQgaXNDb25uZWN0ZWQgPSBmYWxzZTtcblxuY29uc3QgaGFiaXRTY2hlbWEgPSBuZXcgU2NoZW1hPEhhYml0Pih7XG4gIG5hbWU6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9LFxuICBnb2FsOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSxcbiAgdW5pdDogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXG4gIGVudHJpZXM6IHsgdHlwZTogTWFwLCBvZjogU3RyaW5nLCBkZWZhdWx0OiBuZXcgTWFwKCkgfSxcbiAgc3RyZWFrOiB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogMCB9LFxuICBjaHVua3M6IHsgdHlwZTogTnVtYmVyLCByZXF1aXJlZDogZmFsc2UgfSxcbn0pO1xuXG5leHBvcnQgY29uc3QgSGFiaXRNb2RlbCA9XG4gIG1vbmdvb3NlLm1vZGVscy5IYWJpdCB8fCBtb25nb29zZS5tb2RlbDxIYWJpdD4oXCJIYWJpdFwiLCBoYWJpdFNjaGVtYSk7XG5cbmV4cG9ydCBjb25zdCBjb25uZWN0REIgPSBhc3luYyAoKSA9PiB7XG4gIGNvbnNvbGUubG9nKFwiQ29ubmVjdGluZyB0byBNb25nb0RCLi4uXCIpO1xuICBpZiAoaXNDb25uZWN0ZWQpIHtcbiAgICBjb25zb2xlLmxvZyhcIlVzaW5nIGV4aXN0aW5nIE1vbmdvREIgY29ubmVjdGlvblwiKTtcbiAgICByZXR1cm47XG4gIH1cblxuICB0cnkge1xuICAgIGlmICghTU9OR09EQl9VUkkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIk1PTkdPREJfVVJJIGlzIG5vdCBkZWZpbmVkIGluIGVudmlyb25tZW50IHZhcmlhYmxlc1wiKTtcbiAgICB9XG5cbiAgICBhd2FpdCBtb25nb29zZS5jb25uZWN0KE1PTkdPREJfVVJJKTtcbiAgICBpc0Nvbm5lY3RlZCA9IHRydWU7XG4gICAgY29uc29sZS5sb2coXCJNb25nb0RCIGNvbm5lY3RlZCBzdWNjZXNzZnVsbHlcIik7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgaXNDb25uZWN0ZWQgPSBmYWxzZTtcbiAgICBjb25zb2xlLmVycm9yKFwiTW9uZ29EQiBjb25uZWN0aW9uIGVycm9yOlwiLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBjaGVja0Nvbm5lY3Rpb24gPSAoKSA9PiB7XG4gIHJldHVybiB7XG4gICAgaXNDb25uZWN0ZWQsXG4gICAgcmVhZHlTdGF0ZTogbW9uZ29vc2UuY29ubmVjdGlvbi5yZWFkeVN0YXRlLFxuICAgIC8vIDAgPSBkaXNjb25uZWN0ZWQsIDEgPSBjb25uZWN0ZWQsIDIgPSBjb25uZWN0aW5nLCAzID0gZGlzY29ubmVjdGluZ1xuICB9O1xufTtcblxuLy8gQWRkIGEgbmV3IGZ1bmN0aW9uIHRvIGluaXRpYWxpemUgdGhlIGRhdGFiYXNlIHdpdGggZGVmYXVsdCBoYWJpdHMgaWYgZW1wdHlcbmV4cG9ydCBjb25zdCBpbml0aWFsaXplRGVmYXVsdEhhYml0cyA9IGFzeW5jIChkZWZhdWx0SGFiaXRzOiBIYWJpdFtdKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgY291bnQgPSBhd2FpdCBIYWJpdE1vZGVsLmNvdW50RG9jdW1lbnRzKCk7XG4gICAgaWYgKGNvdW50ID09PSAwKSB7XG4gICAgICBhd2FpdCBIYWJpdE1vZGVsLmluc2VydE1hbnkoXG4gICAgICAgIGRlZmF1bHRIYWJpdHMubWFwKChoYWJpdCkgPT4gKHtcbiAgICAgICAgICAuLi5oYWJpdCxcbiAgICAgICAgICBlbnRyaWVzOiBuZXcgTWFwKE9iamVjdC5lbnRyaWVzKGhhYml0LmVudHJpZXMpKSxcbiAgICAgICAgfSkpXG4gICAgICApO1xuICAgICAgY29uc29sZS5sb2coXCJEZWZhdWx0IGhhYml0cyBpbml0aWFsaXplZFwiKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGluaXRpYWxpemluZyBkZWZhdWx0IGhhYml0czpcIiwgZXJyb3IpO1xuICB9XG59O1xuIl0sIm5hbWVzIjpbIm1vbmdvb3NlIiwiU2NoZW1hIiwiZG90ZW52IiwiY29uZmlnIiwiTU9OR09EQl9VUkkiLCJwcm9jZXNzIiwiZW52IiwiaXNDb25uZWN0ZWQiLCJoYWJpdFNjaGVtYSIsIm5hbWUiLCJ0eXBlIiwiU3RyaW5nIiwicmVxdWlyZWQiLCJnb2FsIiwidW5pdCIsImVudHJpZXMiLCJNYXAiLCJvZiIsImRlZmF1bHQiLCJzdHJlYWsiLCJOdW1iZXIiLCJjaHVua3MiLCJIYWJpdE1vZGVsIiwibW9kZWxzIiwiSGFiaXQiLCJtb2RlbCIsImNvbm5lY3REQiIsImNvbnNvbGUiLCJsb2ciLCJFcnJvciIsImNvbm5lY3QiLCJlcnJvciIsImNoZWNrQ29ubmVjdGlvbiIsInJlYWR5U3RhdGUiLCJjb25uZWN0aW9uIiwiaW5pdGlhbGl6ZURlZmF1bHRIYWJpdHMiLCJkZWZhdWx0SGFiaXRzIiwiY291bnQiLCJjb3VudERvY3VtZW50cyIsImluc2VydE1hbnkiLCJtYXAiLCJoYWJpdCIsIk9iamVjdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/db/mongoClient.ts\n");

/***/ }),

/***/ "(api)/./src/pages/api/habits.ts":
/*!*********************************!*\
  !*** ./src/pages/api/habits.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _db_mongoClient__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../db/mongoClient */ \"(api)/./src/db/mongoClient.ts\");\n\n// import { Habit } from \"../../types\";\n// Connect to MongoDB when the API route is called\n(0,_db_mongoClient__WEBPACK_IMPORTED_MODULE_0__.connectDB)();\nasync function handler(req, res) {\n    try {\n        // Handle different HTTP methods\n        switch(req.method){\n            case \"GET\":\n                {\n                    // Fetch all habits\n                    const habits = await _db_mongoClient__WEBPACK_IMPORTED_MODULE_0__.HabitModel.find().lean();\n                    res.status(200).json(habits);\n                    break;\n                }\n            case \"POST\":\n                {\n                    // Create a new habit\n                    const { name, goal, unit, entries, streak, chunks } = req.body;\n                    const newHabit = new _db_mongoClient__WEBPACK_IMPORTED_MODULE_0__.HabitModel({\n                        name,\n                        goal,\n                        unit,\n                        entries: new Map(Object.entries(entries || {})),\n                        streak: streak || 0,\n                        chunks: chunks || undefined\n                    });\n                    const savedHabit = await newHabit.save();\n                    res.status(201).json(savedHabit);\n                    break;\n                }\n            case \"PUT\":\n                {\n                    // Update an existing habit\n                    const { id, name, goal, unit, entries, streak, chunks } = req.body;\n                    const updatedHabit = await _db_mongoClient__WEBPACK_IMPORTED_MODULE_0__.HabitModel.findByIdAndUpdate(id, {\n                        name,\n                        goal,\n                        unit,\n                        entries: new Map(Object.entries(entries || {})),\n                        streak,\n                        chunks\n                    }, {\n                        new: true,\n                        runValidators: true\n                    });\n                    if (!updatedHabit) {\n                        return res.status(404).json({\n                            error: \"Habit not found\"\n                        });\n                    }\n                    res.status(200).json(updatedHabit);\n                    break;\n                }\n            case \"DELETE\":\n                {\n                    // Delete a habit\n                    const { id } = req.body;\n                    const deletedHabit = await _db_mongoClient__WEBPACK_IMPORTED_MODULE_0__.HabitModel.findByIdAndDelete(id);\n                    if (!deletedHabit) {\n                        return res.status(404).json({\n                            error: \"Habit not found\"\n                        });\n                    }\n                    res.status(200).json({\n                        message: \"Habit deleted successfully\"\n                    });\n                    break;\n                }\n            default:\n                {\n                    // Handle unsupported HTTP methods\n                    res.setHeader(\"Allow\", [\n                        \"GET\",\n                        \"POST\",\n                        \"PUT\",\n                        \"DELETE\"\n                    ]);\n                    res.status(405).json({\n                        error: `Method ${req.method} not allowed`\n                    });\n                }\n        }\n    } catch (error) {\n        console.error(\"Error in API route:\", error);\n        res.status(500).json({\n            error: \"Internal server error\"\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdml0ZS1wcm9qZWN0Ly4vc3JjL3BhZ2VzL2FwaS9oYWJpdHMudHM/MWE5MyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSBcIm5leHRcIjtcbmltcG9ydCB7IGNvbm5lY3REQiwgSGFiaXRNb2RlbCB9IGZyb20gXCIuLi8uLi9kYi9tb25nb0NsaWVudFwiO1xuLy8gaW1wb3J0IHsgSGFiaXQgfSBmcm9tIFwiLi4vLi4vdHlwZXNcIjtcblxuLy8gQ29ubmVjdCB0byBNb25nb0RCIHdoZW4gdGhlIEFQSSByb3V0ZSBpcyBjYWxsZWRcbmNvbm5lY3REQigpO1xuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKFxuICByZXE6IE5leHRBcGlSZXF1ZXN0LFxuICByZXM6IE5leHRBcGlSZXNwb25zZVxuKSB7XG4gIHRyeSB7XG4gICAgLy8gSGFuZGxlIGRpZmZlcmVudCBIVFRQIG1ldGhvZHNcbiAgICBzd2l0Y2ggKHJlcS5tZXRob2QpIHtcbiAgICAgIGNhc2UgXCJHRVRcIjoge1xuICAgICAgICAvLyBGZXRjaCBhbGwgaGFiaXRzXG4gICAgICAgIGNvbnN0IGhhYml0cyA9IGF3YWl0IEhhYml0TW9kZWwuZmluZCgpLmxlYW4oKTtcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oaGFiaXRzKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIGNhc2UgXCJQT1NUXCI6IHtcbiAgICAgICAgLy8gQ3JlYXRlIGEgbmV3IGhhYml0XG4gICAgICAgIGNvbnN0IHsgbmFtZSwgZ29hbCwgdW5pdCwgZW50cmllcywgc3RyZWFrLCBjaHVua3MgfSA9IHJlcS5ib2R5O1xuICAgICAgICBjb25zdCBuZXdIYWJpdCA9IG5ldyBIYWJpdE1vZGVsKHtcbiAgICAgICAgICBuYW1lLFxuICAgICAgICAgIGdvYWwsXG4gICAgICAgICAgdW5pdCxcbiAgICAgICAgICBlbnRyaWVzOiBuZXcgTWFwKE9iamVjdC5lbnRyaWVzKGVudHJpZXMgfHwge30pKSxcbiAgICAgICAgICBzdHJlYWs6IHN0cmVhayB8fCAwLFxuICAgICAgICAgIGNodW5rczogY2h1bmtzIHx8IHVuZGVmaW5lZCxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHNhdmVkSGFiaXQgPSBhd2FpdCBuZXdIYWJpdC5zYXZlKCk7XG4gICAgICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKHNhdmVkSGFiaXQpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgY2FzZSBcIlBVVFwiOiB7XG4gICAgICAgIC8vIFVwZGF0ZSBhbiBleGlzdGluZyBoYWJpdFxuICAgICAgICBjb25zdCB7IGlkLCBuYW1lLCBnb2FsLCB1bml0LCBlbnRyaWVzLCBzdHJlYWssIGNodW5rcyB9ID0gcmVxLmJvZHk7XG4gICAgICAgIGNvbnN0IHVwZGF0ZWRIYWJpdCA9IGF3YWl0IEhhYml0TW9kZWwuZmluZEJ5SWRBbmRVcGRhdGUoXG4gICAgICAgICAgaWQsXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgIGdvYWwsXG4gICAgICAgICAgICB1bml0LFxuICAgICAgICAgICAgZW50cmllczogbmV3IE1hcChPYmplY3QuZW50cmllcyhlbnRyaWVzIHx8IHt9KSksXG4gICAgICAgICAgICBzdHJlYWssXG4gICAgICAgICAgICBjaHVua3MsXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7IG5ldzogdHJ1ZSwgcnVuVmFsaWRhdG9yczogdHJ1ZSB9XG4gICAgICAgICk7XG5cbiAgICAgICAgaWYgKCF1cGRhdGVkSGFiaXQpIHtcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogXCJIYWJpdCBub3QgZm91bmRcIiB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHVwZGF0ZWRIYWJpdCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBjYXNlIFwiREVMRVRFXCI6IHtcbiAgICAgICAgLy8gRGVsZXRlIGEgaGFiaXRcbiAgICAgICAgY29uc3QgeyBpZCB9ID0gcmVxLmJvZHk7XG4gICAgICAgIGNvbnN0IGRlbGV0ZWRIYWJpdCA9IGF3YWl0IEhhYml0TW9kZWwuZmluZEJ5SWRBbmREZWxldGUoaWQpO1xuXG4gICAgICAgIGlmICghZGVsZXRlZEhhYml0KSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6IFwiSGFiaXQgbm90IGZvdW5kXCIgfSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IG1lc3NhZ2U6IFwiSGFiaXQgZGVsZXRlZCBzdWNjZXNzZnVsbHlcIiB9KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgLy8gSGFuZGxlIHVuc3VwcG9ydGVkIEhUVFAgbWV0aG9kc1xuICAgICAgICByZXMuc2V0SGVhZGVyKFwiQWxsb3dcIiwgW1wiR0VUXCIsIFwiUE9TVFwiLCBcIlBVVFwiLCBcIkRFTEVURVwiXSk7XG4gICAgICAgIHJlcy5zdGF0dXMoNDA1KS5qc29uKHsgZXJyb3I6IGBNZXRob2QgJHtyZXEubWV0aG9kfSBub3QgYWxsb3dlZGAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBpbiBBUEkgcm91dGU6XCIsIGVycm9yKTtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiBcIkludGVybmFsIHNlcnZlciBlcnJvclwiIH0pO1xuICB9XG59XG4iXSwibmFtZXMiOlsiY29ubmVjdERCIiwiSGFiaXRNb2RlbCIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJtZXRob2QiLCJoYWJpdHMiLCJmaW5kIiwibGVhbiIsInN0YXR1cyIsImpzb24iLCJuYW1lIiwiZ29hbCIsInVuaXQiLCJlbnRyaWVzIiwic3RyZWFrIiwiY2h1bmtzIiwiYm9keSIsIm5ld0hhYml0IiwiTWFwIiwiT2JqZWN0IiwidW5kZWZpbmVkIiwic2F2ZWRIYWJpdCIsInNhdmUiLCJpZCIsInVwZGF0ZWRIYWJpdCIsImZpbmRCeUlkQW5kVXBkYXRlIiwibmV3IiwicnVuVmFsaWRhdG9ycyIsImVycm9yIiwiZGVsZXRlZEhhYml0IiwiZmluZEJ5SWRBbmREZWxldGUiLCJtZXNzYWdlIiwic2V0SGVhZGVyIiwiY29uc29sZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/pages/api/habits.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fhabits&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fhabits.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();