"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/habits";
exports.ids = ["pages/api/habits"];
exports.modules = {

/***/ "dotenv":
/*!*************************!*\
  !*** external "dotenv" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("dotenv");

/***/ }),

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("mongoose");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fhabits&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fhabits.ts&middlewareConfigBase64=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fhabits&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fhabits.ts&middlewareConfigBase64=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _src_pages_api_habits_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/pages/api/habits.ts */ \"(api)/./src/pages/api/habits.ts\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_habits_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_habits_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/habits\",\n        pathname: \"/api/habits\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _src_pages_api_habits_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmhhYml0cyZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnNyYyUyRnBhZ2VzJTJGYXBpJTJGaGFiaXRzLnRzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNMO0FBQzFEO0FBQ3NEO0FBQ3REO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyxxREFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMscURBQVE7QUFDcEM7QUFDTyx3QkFBd0IsZ0hBQW1CO0FBQ2xEO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdml0ZS1wcm9qZWN0Lz9iNzJkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9zcmMvcGFnZXMvYXBpL2hhYml0cy50c1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCBcImRlZmF1bHRcIik7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCBcImNvbmZpZ1wiKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2hhYml0c1wiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2hhYml0c1wiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fhabits&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fhabits.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./src/db/mongoClient.ts":
/*!*******************************!*\
  !*** ./src/db/mongoClient.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HabitModel: () => (/* binding */ HabitModel),\n/* harmony export */   checkConnection: () => (/* binding */ checkConnection),\n/* harmony export */   connectDB: () => (/* binding */ connectDB),\n/* harmony export */   initializeDefaultHabits: () => (/* binding */ initializeDefaultHabits)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var dotenv__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! dotenv */ \"dotenv\");\n/* harmony import */ var dotenv__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(dotenv__WEBPACK_IMPORTED_MODULE_1__);\n\n\ndotenv__WEBPACK_IMPORTED_MODULE_1___default().config();\nconst MONGODB_URI = process.env.MONGODB_URI || \"mongodb://localhost:27017/mit-tracker\";\nlet isConnected = false;\nconst habitSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n    name: {\n        type: String,\n        required: true\n    },\n    goal: {\n        type: String,\n        required: true\n    },\n    unit: {\n        type: String,\n        required: true\n    },\n    entries: {\n        type: Map,\n        of: String,\n        default: new Map()\n    },\n    streak: {\n        type: Number,\n        default: 0\n    },\n    chunks: {\n        type: Number,\n        required: false\n    }\n});\nconst HabitModel = (mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).Habit || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model(\"Habit\", habitSchema);\nconst connectDB = async ()=>{\n    console.log(\"Connecting to MongoDB...\");\n    if (isConnected) {\n        console.log(\"Using existing MongoDB connection\");\n        return;\n    }\n    try {\n        if (!MONGODB_URI) {\n            throw new Error(\"MONGODB_URI is not defined in environment variables\");\n        }\n        await mongoose__WEBPACK_IMPORTED_MODULE_0___default().connect(MONGODB_URI);\n        isConnected = true;\n        console.log(\"MongoDB connected successfully\");\n    } catch (error) {\n        isConnected = false;\n        console.error(\"MongoDB connection error:\", error);\n        throw error;\n    }\n};\nconst checkConnection = ()=>{\n    return {\n        isConnected,\n        readyState: (mongoose__WEBPACK_IMPORTED_MODULE_0___default().connection).readyState\n    };\n};\n// Add a new function to initialize the database with default habits if empty\nconst initializeDefaultHabits = async (defaultHabits)=>{\n    try {\n        const count = await HabitModel.countDocuments();\n        if (count === 0) {\n            await HabitModel.insertMany(defaultHabits.map((habit)=>({\n                    ...habit,\n                    entries: new Map(Object.entries(habit.entries))\n                })));\n            console.log(\"Default habits initialized\");\n        }\n    } catch (error) {\n        console.error(\"Error initializing default habits:\", error);\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvZGIvbW9uZ29DbGllbnQudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBNEM7QUFDaEI7QUFHNUJFLG9EQUFhO0FBRWIsTUFBTUUsY0FDSkMsUUFBUUMsR0FBRyxDQUFDRixXQUFXLElBQUk7QUFFN0IsSUFBSUcsY0FBYztBQUVsQixNQUFNQyxjQUFjLElBQUlQLDRDQUFNQSxDQUFRO0lBQ3BDUSxNQUFNO1FBQUVDLE1BQU1DO1FBQVFDLFVBQVU7SUFBSztJQUNyQ0MsTUFBTTtRQUFFSCxNQUFNQztRQUFRQyxVQUFVO0lBQUs7SUFDckNFLE1BQU07UUFBRUosTUFBTUM7UUFBUUMsVUFBVTtJQUFLO0lBQ3JDRyxTQUFTO1FBQUVMLE1BQU1NO1FBQUtDLElBQUlOO1FBQVFPLFNBQVMsSUFBSUY7SUFBTTtJQUNyREcsUUFBUTtRQUFFVCxNQUFNVTtRQUFRRixTQUFTO0lBQUU7SUFDbkNHLFFBQVE7UUFBRVgsTUFBTVU7UUFBUVIsVUFBVTtJQUFNO0FBQzFDO0FBRU8sTUFBTVUsYUFDWHRCLHdEQUFlLENBQUN3QixLQUFLLElBQUl4QixxREFBYyxDQUFRLFNBQVNRLGFBQWE7QUFFaEUsTUFBTWtCLFlBQVk7SUFDdkJDLFFBQVFDLEdBQUcsQ0FBQztJQUNaLElBQUlyQixhQUFhO1FBQ2ZvQixRQUFRQyxHQUFHLENBQUM7UUFDWjtJQUNGO0lBRUEsSUFBSTtRQUNGLElBQUksQ0FBQ3hCLGFBQWE7WUFDaEIsTUFBTSxJQUFJeUIsTUFBTTtRQUNsQjtRQUVBLE1BQU03Qix1REFBZ0IsQ0FBQ0k7UUFDdkJHLGNBQWM7UUFDZG9CLFFBQVFDLEdBQUcsQ0FBQztJQUNkLEVBQUUsT0FBT0csT0FBTztRQUNkeEIsY0FBYztRQUNkb0IsUUFBUUksS0FBSyxDQUFDLDZCQUE2QkE7UUFDM0MsTUFBTUE7SUFDUjtBQUNGLEVBQUU7QUFFSyxNQUFNQyxrQkFBa0I7SUFDN0IsT0FBTztRQUNMekI7UUFDQTBCLFlBQVlqQyw0REFBbUIsQ0FBQ2lDLFVBQVU7SUFFNUM7QUFDRixFQUFFO0FBRUYsNkVBQTZFO0FBQ3RFLE1BQU1FLDBCQUEwQixPQUFPQztJQUM1QyxJQUFJO1FBQ0YsTUFBTUMsUUFBUSxNQUFNZixXQUFXZ0IsY0FBYztRQUM3QyxJQUFJRCxVQUFVLEdBQUc7WUFDZixNQUFNZixXQUFXaUIsVUFBVSxDQUN6QkgsY0FBY0ksR0FBRyxDQUFDLENBQUNDLFFBQVc7b0JBQzVCLEdBQUdBLEtBQUs7b0JBQ1IxQixTQUFTLElBQUlDLElBQUkwQixPQUFPM0IsT0FBTyxDQUFDMEIsTUFBTTFCLE9BQU87Z0JBQy9DO1lBRUZZLFFBQVFDLEdBQUcsQ0FBQztRQUNkO0lBQ0YsRUFBRSxPQUFPRyxPQUFPO1FBQ2RKLFFBQVFJLEtBQUssQ0FBQyxzQ0FBc0NBO0lBQ3REO0FBQ0YsRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL3ZpdGUtcHJvamVjdC8uL3NyYy9kYi9tb25nb0NsaWVudC50cz85Y2I4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSwgeyBTY2hlbWEgfSBmcm9tIFwibW9uZ29vc2VcIjtcbmltcG9ydCBkb3RlbnYgZnJvbSBcImRvdGVudlwiO1xuaW1wb3J0IHsgSGFiaXQgfSBmcm9tIFwiLi4vdHlwZXNcIjtcblxuZG90ZW52LmNvbmZpZygpO1xuXG5jb25zdCBNT05HT0RCX1VSSSA9XG4gIHByb2Nlc3MuZW52Lk1PTkdPREJfVVJJIHx8IFwibW9uZ29kYjovL2xvY2FsaG9zdDoyNzAxNy9taXQtdHJhY2tlclwiO1xuXG5sZXQgaXNDb25uZWN0ZWQgPSBmYWxzZTtcblxuY29uc3QgaGFiaXRTY2hlbWEgPSBuZXcgU2NoZW1hPEhhYml0Pih7XG4gIG5hbWU6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9LFxuICBnb2FsOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSxcbiAgdW5pdDogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXG4gIGVudHJpZXM6IHsgdHlwZTogTWFwLCBvZjogU3RyaW5nLCBkZWZhdWx0OiBuZXcgTWFwKCkgfSxcbiAgc3RyZWFrOiB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogMCB9LFxuICBjaHVua3M6IHsgdHlwZTogTnVtYmVyLCByZXF1aXJlZDogZmFsc2UgfSxcbn0pO1xuXG5leHBvcnQgY29uc3QgSGFiaXRNb2RlbCA9XG4gIG1vbmdvb3NlLm1vZGVscy5IYWJpdCB8fCBtb25nb29zZS5tb2RlbDxIYWJpdD4oXCJIYWJpdFwiLCBoYWJpdFNjaGVtYSk7XG5cbmV4cG9ydCBjb25zdCBjb25uZWN0REIgPSBhc3luYyAoKSA9PiB7XG4gIGNvbnNvbGUubG9nKFwiQ29ubmVjdGluZyB0byBNb25nb0RCLi4uXCIpO1xuICBpZiAoaXNDb25uZWN0ZWQpIHtcbiAgICBjb25zb2xlLmxvZyhcIlVzaW5nIGV4aXN0aW5nIE1vbmdvREIgY29ubmVjdGlvblwiKTtcbiAgICByZXR1cm47XG4gIH1cblxuICB0cnkge1xuICAgIGlmICghTU9OR09EQl9VUkkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIk1PTkdPREJfVVJJIGlzIG5vdCBkZWZpbmVkIGluIGVudmlyb25tZW50IHZhcmlhYmxlc1wiKTtcbiAgICB9XG5cbiAgICBhd2FpdCBtb25nb29zZS5jb25uZWN0KE1PTkdPREJfVVJJKTtcbiAgICBpc0Nvbm5lY3RlZCA9IHRydWU7XG4gICAgY29uc29sZS5sb2coXCJNb25nb0RCIGNvbm5lY3RlZCBzdWNjZXNzZnVsbHlcIik7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgaXNDb25uZWN0ZWQgPSBmYWxzZTtcbiAgICBjb25zb2xlLmVycm9yKFwiTW9uZ29EQiBjb25uZWN0aW9uIGVycm9yOlwiLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBjaGVja0Nvbm5lY3Rpb24gPSAoKSA9PiB7XG4gIHJldHVybiB7XG4gICAgaXNDb25uZWN0ZWQsXG4gICAgcmVhZHlTdGF0ZTogbW9uZ29vc2UuY29ubmVjdGlvbi5yZWFkeVN0YXRlLFxuICAgIC8vIDAgPSBkaXNjb25uZWN0ZWQsIDEgPSBjb25uZWN0ZWQsIDIgPSBjb25uZWN0aW5nLCAzID0gZGlzY29ubmVjdGluZ1xuICB9O1xufTtcblxuLy8gQWRkIGEgbmV3IGZ1bmN0aW9uIHRvIGluaXRpYWxpemUgdGhlIGRhdGFiYXNlIHdpdGggZGVmYXVsdCBoYWJpdHMgaWYgZW1wdHlcbmV4cG9ydCBjb25zdCBpbml0aWFsaXplRGVmYXVsdEhhYml0cyA9IGFzeW5jIChkZWZhdWx0SGFiaXRzOiBIYWJpdFtdKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgY291bnQgPSBhd2FpdCBIYWJpdE1vZGVsLmNvdW50RG9jdW1lbnRzKCk7XG4gICAgaWYgKGNvdW50ID09PSAwKSB7XG4gICAgICBhd2FpdCBIYWJpdE1vZGVsLmluc2VydE1hbnkoXG4gICAgICAgIGRlZmF1bHRIYWJpdHMubWFwKChoYWJpdCkgPT4gKHtcbiAgICAgICAgICAuLi5oYWJpdCxcbiAgICAgICAgICBlbnRyaWVzOiBuZXcgTWFwKE9iamVjdC5lbnRyaWVzKGhhYml0LmVudHJpZXMpKSxcbiAgICAgICAgfSkpXG4gICAgICApO1xuICAgICAgY29uc29sZS5sb2coXCJEZWZhdWx0IGhhYml0cyBpbml0aWFsaXplZFwiKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGluaXRpYWxpemluZyBkZWZhdWx0IGhhYml0czpcIiwgZXJyb3IpO1xuICB9XG59O1xuIl0sIm5hbWVzIjpbIm1vbmdvb3NlIiwiU2NoZW1hIiwiZG90ZW52IiwiY29uZmlnIiwiTU9OR09EQl9VUkkiLCJwcm9jZXNzIiwiZW52IiwiaXNDb25uZWN0ZWQiLCJoYWJpdFNjaGVtYSIsIm5hbWUiLCJ0eXBlIiwiU3RyaW5nIiwicmVxdWlyZWQiLCJnb2FsIiwidW5pdCIsImVudHJpZXMiLCJNYXAiLCJvZiIsImRlZmF1bHQiLCJzdHJlYWsiLCJOdW1iZXIiLCJjaHVua3MiLCJIYWJpdE1vZGVsIiwibW9kZWxzIiwiSGFiaXQiLCJtb2RlbCIsImNvbm5lY3REQiIsImNvbnNvbGUiLCJsb2ciLCJFcnJvciIsImNvbm5lY3QiLCJlcnJvciIsImNoZWNrQ29ubmVjdGlvbiIsInJlYWR5U3RhdGUiLCJjb25uZWN0aW9uIiwiaW5pdGlhbGl6ZURlZmF1bHRIYWJpdHMiLCJkZWZhdWx0SGFiaXRzIiwiY291bnQiLCJjb3VudERvY3VtZW50cyIsImluc2VydE1hbnkiLCJtYXAiLCJoYWJpdCIsIk9iamVjdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/db/mongoClient.ts\n");

/***/ }),

/***/ "(api)/./src/pages/api/habits.ts":
/*!*********************************!*\
  !*** ./src/pages/api/habits.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _db_mongoClient__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../db/mongoClient */ \"(api)/./src/db/mongoClient.ts\");\n\n// Connect to MongoDB when the API route is called\n(0,_db_mongoClient__WEBPACK_IMPORTED_MODULE_0__.connectDB)();\nasync function handler(req, res) {\n    try {\n        const { method } = req;\n        const { id } = req.query; // Extract ID from URL parameters\n        switch(method){\n            case \"GET\":\n                {\n                    const habits = await _db_mongoClient__WEBPACK_IMPORTED_MODULE_0__.HabitModel.find().lean();\n                    res.status(200).json(habits);\n                    break;\n                }\n            case \"POST\":\n                {\n                    const { name, goal, unit, entries, streak, chunks } = req.body;\n                    const newHabit = new _db_mongoClient__WEBPACK_IMPORTED_MODULE_0__.HabitModel({\n                        name,\n                        goal,\n                        unit,\n                        entries: new Map(Object.entries(entries || {})),\n                        streak: streak || 0,\n                        chunks: chunks || undefined\n                    });\n                    const savedHabit = await newHabit.save();\n                    res.status(201).json(savedHabit);\n                    break;\n                }\n            case \"PUT\":\n                {\n                    console.log(\"Update habit endpoint hit\");\n                    if (!id || typeof id !== \"string\") {\n                        return res.status(400).json({\n                            error: \"Habit ID is required\"\n                        });\n                    }\n                    const { name, goal, unit, entries, streak, chunks } = req.body;\n                    const updatedHabit = await _db_mongoClient__WEBPACK_IMPORTED_MODULE_0__.HabitModel.findByIdAndUpdate(id, {\n                        name,\n                        goal,\n                        unit,\n                        entries: new Map(Object.entries(entries || {})),\n                        streak,\n                        chunks\n                    }, {\n                        new: true,\n                        runValidators: true\n                    });\n                    if (!updatedHabit) {\n                        return res.status(404).json({\n                            error: \"Habit not found\"\n                        });\n                    }\n                    res.status(200).json(updatedHabit);\n                    break;\n                }\n            case \"DELETE\":\n                {\n                    if (!id || typeof id !== \"string\") {\n                        return res.status(400).json({\n                            error: \"Habit ID is required\"\n                        });\n                    }\n                    const deletedHabit = await _db_mongoClient__WEBPACK_IMPORTED_MODULE_0__.HabitModel.findByIdAndDelete(id);\n                    if (!deletedHabit) {\n                        return res.status(404).json({\n                            error: \"Habit not found\"\n                        });\n                    }\n                    res.status(200).json({\n                        message: \"Habit deleted successfully\"\n                    });\n                    break;\n                }\n            default:\n                {\n                    res.setHeader(\"Allow\", [\n                        \"GET\",\n                        \"POST\",\n                        \"PUT\",\n                        \"DELETE\"\n                    ]);\n                    res.status(405).json({\n                        error: `Method ${method} not allowed`\n                    });\n                }\n        }\n    } catch (error) {\n        console.error(\"Error in API route:\", error);\n        res.status(500).json({\n            error: \"Internal server error\"\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxPQUFPLEVBQUV2QixPQUFPLFlBQVksQ0FBQztvQkFBQztnQkFDL0Q7UUFDRjtJQUNGLEVBQUUsT0FBT3VCLE9BQU87UUFDZEYsUUFBUUUsS0FBSyxDQUFDLHVCQUF1QkE7UUFDckN4QixJQUFJTyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUVnQixPQUFPO1FBQXdCO0lBQ3hEO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aXRlLXByb2plY3QvLi9zcmMvcGFnZXMvYXBpL2hhYml0cy50cz8xYTkzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRBcGlSZXF1ZXN0LCBOZXh0QXBpUmVzcG9uc2UgfSBmcm9tIFwibmV4dFwiO1xuaW1wb3J0IHsgY29ubmVjdERCLCBIYWJpdE1vZGVsIH0gZnJvbSBcIi4uLy4uL2RiL21vbmdvQ2xpZW50XCI7XG5cbi8vIENvbm5lY3QgdG8gTW9uZ29EQiB3aGVuIHRoZSBBUEkgcm91dGUgaXMgY2FsbGVkXG5jb25uZWN0REIoKTtcblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihcbiAgcmVxOiBOZXh0QXBpUmVxdWVzdCxcbiAgcmVzOiBOZXh0QXBpUmVzcG9uc2Vcbikge1xuICB0cnkge1xuICAgIGNvbnN0IHsgbWV0aG9kIH0gPSByZXE7XG4gICAgY29uc3QgeyBpZCB9ID0gcmVxLnF1ZXJ5OyAvLyBFeHRyYWN0IElEIGZyb20gVVJMIHBhcmFtZXRlcnNcblxuICAgIHN3aXRjaCAobWV0aG9kKSB7XG4gICAgICBjYXNlIFwiR0VUXCI6IHtcbiAgICAgICAgY29uc3QgaGFiaXRzID0gYXdhaXQgSGFiaXRNb2RlbC5maW5kKCkubGVhbigpO1xuICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbihoYWJpdHMpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgY2FzZSBcIlBPU1RcIjoge1xuICAgICAgICBjb25zdCB7IG5hbWUsIGdvYWwsIHVuaXQsIGVudHJpZXMsIHN0cmVhaywgY2h1bmtzIH0gPSByZXEuYm9keTtcbiAgICAgICAgY29uc3QgbmV3SGFiaXQgPSBuZXcgSGFiaXRNb2RlbCh7XG4gICAgICAgICAgbmFtZSxcbiAgICAgICAgICBnb2FsLFxuICAgICAgICAgIHVuaXQsXG4gICAgICAgICAgZW50cmllczogbmV3IE1hcChPYmplY3QuZW50cmllcyhlbnRyaWVzIHx8IHt9KSksXG4gICAgICAgICAgc3RyZWFrOiBzdHJlYWsgfHwgMCxcbiAgICAgICAgICBjaHVua3M6IGNodW5rcyB8fCB1bmRlZmluZWQsXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBzYXZlZEhhYml0ID0gYXdhaXQgbmV3SGFiaXQuc2F2ZSgpO1xuICAgICAgICByZXMuc3RhdHVzKDIwMSkuanNvbihzYXZlZEhhYml0KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIGNhc2UgXCJQVVRcIjoge1xuICAgICAgICBjb25zb2xlLmxvZyhcIlVwZGF0ZSBoYWJpdCBlbmRwb2ludCBoaXRcIik7XG5cbiAgICAgICAgaWYgKCFpZCB8fCB0eXBlb2YgaWQgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJIYWJpdCBJRCBpcyByZXF1aXJlZFwiIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgeyBuYW1lLCBnb2FsLCB1bml0LCBlbnRyaWVzLCBzdHJlYWssIGNodW5rcyB9ID0gcmVxLmJvZHk7XG4gICAgICAgIGNvbnN0IHVwZGF0ZWRIYWJpdCA9IGF3YWl0IEhhYml0TW9kZWwuZmluZEJ5SWRBbmRVcGRhdGUoXG4gICAgICAgICAgaWQsXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgIGdvYWwsXG4gICAgICAgICAgICB1bml0LFxuICAgICAgICAgICAgZW50cmllczogbmV3IE1hcChPYmplY3QuZW50cmllcyhlbnRyaWVzIHx8IHt9KSksXG4gICAgICAgICAgICBzdHJlYWssXG4gICAgICAgICAgICBjaHVua3MsXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7IG5ldzogdHJ1ZSwgcnVuVmFsaWRhdG9yczogdHJ1ZSB9XG4gICAgICAgICk7XG5cbiAgICAgICAgaWYgKCF1cGRhdGVkSGFiaXQpIHtcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogXCJIYWJpdCBub3QgZm91bmRcIiB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHVwZGF0ZWRIYWJpdCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBjYXNlIFwiREVMRVRFXCI6IHtcbiAgICAgICAgaWYgKCFpZCB8fCB0eXBlb2YgaWQgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJIYWJpdCBJRCBpcyByZXF1aXJlZFwiIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZGVsZXRlZEhhYml0ID0gYXdhaXQgSGFiaXRNb2RlbC5maW5kQnlJZEFuZERlbGV0ZShpZCk7XG5cbiAgICAgICAgaWYgKCFkZWxldGVkSGFiaXQpIHtcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogXCJIYWJpdCBub3QgZm91bmRcIiB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgbWVzc2FnZTogXCJIYWJpdCBkZWxldGVkIHN1Y2Nlc3NmdWxseVwiIH0pO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgZGVmYXVsdDoge1xuICAgICAgICByZXMuc2V0SGVhZGVyKFwiQWxsb3dcIiwgW1wiR0VUXCIsIFwiUE9TVFwiLCBcIlBVVFwiLCBcIkRFTEVURVwiXSk7XG4gICAgICAgIHJlcy5zdGF0dXMoNDA1KS5qc29uKHsgZXJyb3I6IGBNZXRob2QgJHttZXRob2R9IG5vdCBhbGxvd2VkYCB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGluIEFQSSByb3V0ZTpcIiwgZXJyb3IpO1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6IFwiSW50ZXJuYWwgc2VydmVyIGVycm9yXCIgfSk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJjb25uZWN0REIiLCJIYWJpdE1vZGVsIiwiaGFuZGxlciIsInJlcSIsInJlcyIsIm1ldGhvZCIsImlkIiwicXVlcnkiLCJoYWJpdHMiLCJmaW5kIiwibGVhbiIsInN0YXR1cyIsImpzb24iLCJuYW1lIiwiZ29hbCIsInVuaXQiLCJlbnRyaWVzIiwic3RyZWFrIiwiY2h1bmtzIiwiYm9keSIsIm5ld0hhYml0IiwiTWFwIiwiT2JqZWN0IiwidW5kZWZpbmVkIiwic2F2ZWRIYWJpdCIsInNhdmUiLCJjb25zb2xlIiwibG9nIiwiZXJyb3IiLCJ1cGRhdGVkSGFiaXQiLCJmaW5kQnlJZEFuZFVwZGF0ZSIsIm5ldyIsInJ1blZhbGlkYXRvcnMiLCJkZWxldGVkSGFiaXQiLCJmaW5kQnlJZEFuZERlbGV0ZSIsIm1lc3NhZ2UiLCJzZXRIZWFkZXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/pages/api/habits.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fhabits&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fhabits.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();